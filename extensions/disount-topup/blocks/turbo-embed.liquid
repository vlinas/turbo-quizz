<style>
 #hellobar_bar {
  width: 100%;
  margin: 0;
  height: fit-content;
  display: none; /* Hide by default */
  justify-content: space-between;
  font-size: 17px;
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  color: #5c5e60;
  position: fixed; /* Change to fixed to slide in/out from the top */
  top: -100px; /* Position it above the viewport initially */
  left: 0;
  background-color: white;
  box-shadow: 0 1px 3px 2px rgba(0, 0, 0, 0.15);
  z-index: 1000; /* Ensure it is above other elements */
  transition: top 0.5s ease; /* Add transition for the sliding effect */
}

#hellobar_bar.regular {
  background: #18c932;
  height: fit-content;
  font-size: 14px;
  padding-top: 6px;
  padding-bottom: 6px;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}

@media only screen and (max-width: 750px) {
  #hellobar_bar.regular {
    padding-left: 3.2rem !important;
    padding-right: 3.2rem !important;
  }
  .hb-headline-text #coupon_code_exists {
    margin-right: 15px;
    font-size: 12px;
  }
}

@media screen and (min-width: 990px) {
  #hellobar_bar.regular {
    padding-left: 5rem !important;
    padding-right: 5rem !important;
  }
}

.hb-content-wrapper {
  text-align: center;
  position: relative;
  width: 100%;
}

.hb-content-wrapper p {
      margin-top: 0;
    margin-bottom: 0;
    color: white;
    font-family: inherit;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    letter-spacing: 0;
}

.hb-text-wrapper .hb-headline-text {
  font-size: 1em;
}

.hb-close-wrapper {
  position: absolute;
  right: 10px;
}

.hb-close-wrapper .icon-close {
  font-size: 14px;
  top: 0px;
  right: 25px;
  width: 15px;
  height: 15px;
  opacity: 0.7;
  color: #000;
  cursor: pointer;
  text-align: center;
  line-height: 15px;
  text-decoration: none;
}

.hb-headline-text #coupon_code_exists {
      background: #ffffffc4;
    border-radius: 50px;
    padding: 1px 14px;
    color: #000;
    font-size: 13px;
    border: 1px solid white;
}

.slide-in {
  top: 0 !important; /* Slide in to the top of the viewport */
}

.slide-out {
  top: -100px !important; /* Slide out to above the viewport */
}

</style>
<div id="hellobar_bar" class="regular closable">
  <div class="hb-content-wrapper">
    <div class="hb-text-wrapper">
      <div class="hb-headline-text">
        <p align="center">Discount applied successfully!<span id="coupon_code_exists"></span></p>
      </div>
    </div>
  </div>
  <div class="hb-close-wrapper">
    <a href="javascript:void(0);" class="icon-close" id="top_bar_close_icon">&#10006;</a>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
  // Wait for the DOM to be fully loaded

  var toggleElement = document.getElementById('top_bar_close_icon');

  // Check if the banner was closed or already shown in this session
  const bannerClosed = sessionStorage.getItem('bannerClosed');
  const bannerAlreadyShown = sessionStorage.getItem('bannerShown');

  if (!bannerClosed && !bannerAlreadyShown) {
    const cookies = document.cookie.split(';');
    let discountCodeFromCookie = null;

    cookies.forEach((cookie) => {
      const [name, value] = cookie.trim().split('=');
      if (name === 'discount_code') {
        discountCodeFromCookie = value;
      }
    });

    var topBarElement = document.getElementById('hellobar_bar');
    if (discountCodeFromCookie) {
      var code = document.getElementById('coupon_code_exists');
      code.textContent = discountCodeFromCookie;
      const discount_banner_main = document.getElementById('burga-banner-main');
      if (discount_banner_main) {
        discount_banner_main.style.display = 'none';
      }
      // Show the banner with a slide-in effect
      topBarElement.style.display = 'flex';
      setTimeout(() => {
        topBarElement.classList.add('slide-in');
      }, 10); // Slight delay to ensure the transition works

      // Mark that we've shown the banner in this session
      sessionStorage.setItem('bannerShown', 'true');
    }

    toggleElement.addEventListener('click', function () {
      // Ensure the element exists before attempting to fade it out
      if (topBarElement) {
        // Add a class to initiate the slide-out effect
        topBarElement.classList.remove('slide-in');
        topBarElement.classList.add('slide-out');

        // Set session storage item to keep the banner closed for the session
        sessionStorage.setItem('bannerClosed', 'true');

        // Remove the element after the animation completes
        setTimeout(() => {
          topBarElement.remove();
        }, 500); // Match this duration to the CSS transition duration
      }
    });
  }
});
</script>

{% schema %}
{
  "name": "ClickX Top Banner",
  "target": "head",
  "settings": []
}
{% endschema %}
