{% comment %}
  Quiz Widget Block
  Displays an interactive quiz on the storefront
{% endcomment %}

<div
  class="quizza-widget"
  data-quiz-id="{{ block.settings.quiz_id }}"
  data-app-url="https://turbo-quizz-staging-4bd0e4ee4b32.herokuapp.com"
  id="quizza-{{ block.id }}"
>
  <div class="quizza-loading" style="display: none; opacity: 0;">
    <div class="quizza-spinner"></div>
  </div>

  <div class="quizza-error" style="display: none;">
    <p class="quizza-error-message"></p>
    <button class="quizza-retry-btn">Try Again</button>
  </div>

  <div class="quizza-container">
    <!-- Quiz Header (hidden - minimal theme-friendly design) -->
    <div class="quizza-header" style="display: none;">
      <h2 class="quizza-title"></h2>
      <p class="quizza-description"></p>
      <div class="quizza-progress">
        <div class="quizza-progress-bar">
          <div class="quizza-progress-fill" style="width: 0%"></div>
        </div>
        <p class="quizza-progress-text">Question <span class="current">1</span> of <span class="total">0</span></p>
      </div>
    </div>

    <!-- Quiz Question -->
    <div class="quizza-question">
      <h3 class="quizza-question-text"></h3>
      <div class="quizza-answers"></div>
    </div>

    <!-- Quiz Result -->
    <div class="quizza-result" style="display: none;">
      <div class="quizza-result-content"></div>
      <div class="quizza-result-actions" style="display: none;">
        <button class="quizza-restart-btn">Take Quiz Again</button>
      </div>
    </div>

    <!-- Quiz Navigation (hidden - auto-advance on answer selection) -->
    <div class="quizza-navigation" style="display: none;">
      <button class="quizza-back-btn" style="display: none;">Back</button>
      <button class="quizza-next-btn" disabled>Next</button>
    </div>
  </div>
</div>

{{ 'quiz-widget.css' | asset_url | stylesheet_tag }}
<script src="{{ 'quiz-widget.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Quiz Widget",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "quiz_id",
      "label": "Quiz ID",
      "info": "Enter the Quiz ID from your Simple Product Quiz Survey app (found in the quiz details page)"
    }
  ]
}
{% endschema %}
